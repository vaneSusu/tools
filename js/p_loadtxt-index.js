(self.webpackChunkfabritor_web=self.webpackChunkfabritor_web||[]).push([[854],{2696:function(e){e.exports={fileUploadRender:"fileUploadRender--Ba8PYJP5",panel:"panel--NiprbrDt",uploadbtn:"uploadbtn--rEa2za1f",fileInput:"fileInput--Yv7BZdr6",loadMoreBtn:"loadMoreBtn--sSiwWZE7",downloadBtn:"downloadBtn--1WAXs47G",dataItem:"dataItem--_ZWvpv8r",prompt:"prompt--kYRFBzuC",imageGrid:"imageGrid--x_9hJA31",imageItem:"imageItem--ET6nzlKE",deleteImageBtn:"deleteImageBtn--FubMBfIh"}},6264:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(5166),a=n(8703),r=n(4758),c=n(4160),l=n(7776),o=n(959),u=n(8041),d=n(2696),s=n.n(d),p=n(6538),m=n(8630),f=n(4330),h=n(665),g=n(7873),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},Z=n(4024),B=o.forwardRef(function(e,t){return o.createElement(Z.Z,(0,g.Z)({},e,{ref:t,icon:v}))}),b=n(847),w=function(){var e=(0,r._)((0,o.useState)([]),2),t=e[0],n=e[1],d=(0,r._)((0,o.useState)([]),2),g=d[0],v=d[1],Z=function(e,t){v(function(e){return e.includes(t)?e.filter(function(e){return e!==t}):(0,c._)(e).concat([t])})},w=function(e,i,a){var r,l=(0,c._)(t),o=(0,c._)(null===(r=l[e])||void 0===r?void 0:r.images);o.splice(i,1),l[e].images=o,n(l)};return(0,l.BX)("div",{className:s().fileUploadRender,children:[(0,l.BX)("div",{className:s().panel,children:[(0,l.BX)(p.ZP,{type:"primary",className:s().uploadbtn,onClick:function(){var e=document.querySelector('input[type="file"]');e&&e.click()},children:["\u52A0\u8F7Dtxt",(0,l.tZ)("input",{type:"file",onChange:function(e){var t=e.target.files[0];try{var r=new FileReader;r.onload=function(){var e,t=r.result,c=[];try{c=t.split("\n").map(function(e){return JSON.parse(e)})}catch(l){var o=t.split("\n");if(o.length>0)for(var u=[],d=0;d<o.length;d++)u.push(o[d]),(d+1)%4===0&&(c.push({images:u}),u=[]),d===o.length-1&&u.length>0&&u.length<4&&c.push({images:u})}c=null===(e=c)||void 0===e?void 0:e.map(function(e,t){return(0,a._)((0,i._)({},e),{id:Date.now().toString(36)+Math.random().toString(36).substring(2)})}),n(c)},r.readAsText(t)}catch(c){}},className:s().fileInput})]}),(0,l.tZ)(p.ZP,{type:"primary",onClick:function(){var e=Object.values(t.reduce(function(e,t){var n=t.prompt,i=t.images.filter(function(e){return g.includes(e)});return i.length>0&&(e[n]?e[n].images=(0,c._)(e[n].images).concat((0,c._)(i)):e[n]={prompt:n,images:i}),e},{}));(0,b.w7)(e)},children:"\u5BFC\u51FA\u5DF2\u9009\u56FE"}),(0,l.tZ)(p.ZP,{type:"primary",onClick:function(){(0,b.w7)(t)},children:"\u5BFC\u51FA\u5168\u90E8"})]}),(null==t?void 0:t.length)?(0,l.tZ)(m.Z,{children:(0,l.tZ)(u.Z,{data:t,itemHeight:650,itemKey:"id",children:function(e,t){return(0,l.BX)("div",{className:s().dataItem,children:[(0,l.tZ)("h3",{className:s().prompt,children:e.prompt}),(0,l.tZ)("div",{className:s().imageGrid,children:e.images.map(function(e,n){return(0,l.BX)("div",{className:s().imageItem,children:[(0,l.tZ)("button",{className:s().deleteImageBtn,onClick:function(){return w(t,n,e)},children:"Delete"}),(0,l.tZ)("img",{src:e,alt:"Image ".concat(n)}),(0,l.tZ)("input",{type:"checkbox",checked:g.includes(e),onChange:function(){return Z(t,e)}})]},n)})})]})}})}):(0,l.tZ)(f.Z,{description:"\u8BF7\u5148\u4E0A\u4F20txt\u6587\u4EF6"}),(0,l.BX)(h.Z.Group,{children:[(0,l.tZ)(h.Z.BackTop,{}),(0,l.tZ)(h.Z,{onClick:function(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},icon:(0,l.tZ)(B,{})})]})]})}}}]);